# 22: サイドバー・アコーディオンのヒント/説明強化

- 番号: 22
- 種別: Feature
- Tier: 1（低リスク・UI変更のみ）
- 目的: サイドバー各セクションの用途を初見でも理解できるよう補助ヒントを提示し、操作ガイダンスを向上させる。

## 背景 / 文脈

アコーディオン化によって情報量は整理されたが、セクション名だけでは操作ステップが伝わりづらい。短い説明と操作のヒントを追加し、迷いを軽減する。

## 要件（仕様）

- `summary` 見出し右側にヒントトグル（アイコンまたはテキストリンク）を追加。
  - クリック/Enter/Space で説明エリアを開閉できる。
  - `aria-expanded` を適切に更新。
- ヒント本文は `div.accordion-hint` として挿入し、開閉アニメーションは最小限。
- アコーディオンの排他モード/複数同時展開モードを切り替えられる設定を追加。
  - 既定は従来通り排他（1セクションのみ開）。
  - 設定は `localStorage: agp_sidebar_multi_open` に保存。
- フォーカスリング/キーボード操作のアクセシビリティ向上。
  - `summary` フォーカス時に視認性の高いアウトラインを表示。
  - ←/→ で隣接セクションへ移動できるキーボード操作を検討。
- 既存DOM IDおよびNodeEditor UIとの互換性を保持。

## 受け入れ基準

- ヒントトグルを操作すると説明文が表示/非表示になる。
- キーボード操作のみでヒントとアコーディオンを開閉できる。
- 「複数同時展開」設定を切り替え、再読込後も設定が維持される。
- ヒント追加後も既存機能（保存一覧、NodeEditor、Mermaidプレビュー）が従来通り動作する。

## 影響範囲

- `admin.html`（ヒントトグルDOMと説明エリア、設定UI追加）
- `styles/admin.css`（ヒント表示・フォーカススタイル）
- `scripts/admin.js`（ヒント開閉ロジック、複数展開モード設定の永続化）
- `CHANGELOG.md` / `README.md`（必要に応じて追記）

## タスク

1. ヒントDOMの挿入テンプレート化と配線。
2. CSS調整：ヒントパネル、focus-visible、アイコンスタイル。
3. JS実装：ヒント開閉、`aria-expanded` 更新、マルチ展開設定の永続化。
4. 設定UI追加（「複数セクション同時展開を許可」トグル）。
5. 手動確認とドキュメント更新（CHANGELOG/README）。

## 手動テスト

- 各セクションのヒントトグルをクリックし説明が表示されることを確認。
- Tab/Enter/Space で同等操作が可能。
- マルチ展開設定オン/オフ後、再読込でも設定が維持される。
- 既存ショートカットやNodeEditor機能が影響を受けないことを確認。
