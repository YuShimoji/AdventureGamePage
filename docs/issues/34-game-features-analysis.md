# 34: ゲーム機能分析と拡張提案

- 番号: 34
- 種別: Feature
- Tier: 2（中リスク, 複数機能追加）
- 目的: 現在のゲーム機能を分析し、未実装のありうべき機能を提案・優先順位付けする。

## 現在のゲーム機能分析

| カテゴリ         | 機能                    | 実装状況        | 説明                                                                    |
| ---------------- | ----------------------- | --------------- | ----------------------------------------------------------------------- |
| **基本機能**     | ノードベースストーリー  | ✅ 完了         | JSONベースの分岐型ストーリー                                            |
|                  | 戻る/進むナビゲーション | ✅ 完了         | 履歴ベースのナビゲーション                                              |
|                  | リスタート機能          | ✅ 完了         | ゲーム初期化                                                            |
| **保存機能**     | セーブ/ロード           | ✅ 完了         | localStorageベース                                                      |
|                  | 自動セーブ              | ✅ 完了         | ノード遷移/状態更新時に進行データを自動保存（saveProgress）             |
|                  | クラウドセーブ          | ❌ 未実装       | サーバー連携保存                                                        |
| **インベントリ** | アイテム管理            | ✅ 完了         | 追加/削除/確認/永続化                                                   |
|                  | アイテム使用            | ✅ 完了         | usableアイテムの使用/消費と効果（heal/set_flag/set_variable/show_text） |
|                  | アイテム合成            | ❌ 未実装       | アイテム組み合わせ                                                      |
| **ゲームプレイ** | 条件分岐                | ✅ 完了         | アイテムベースの条件                                                    |
|                  | アクション実行          | ✅ 完了         | ノード遷移時の自動実行                                                  |
|                  | 変数システム            | ✅ 完了（基礎） | playerState.variables + set_variable + variable条件（exists/equals）    |
|                  | ランダムイベント        | ❌ 未実装       | 確率分岐                                                                |
| **キャラクター** | ステータス管理          | ❌ 未実装       | HP/経験値/レベル                                                        |
|                  | スキルシステム          | ❌ 未実装       | キャラクター能力                                                        |
|                  | 装備システム            | ❌ 未実装       | アイテム装備                                                            |
| **メディア**     | 画像表示                | ✅ 完了         | node.image の描画                                                       |
|                  | サウンド                | ✅ 完了         | audio actions（play_bgm/play_sfx/stop_bgm 等）                          |
|                  | 動画                    | ❌ 未実装       | カットシーン                                                            |
| **進行管理**     | 複数エンディング        | ❌ 未実装       | エンド判定システム                                                      |
|                  | アチーブメント          | ❌ 未実装       | 実績システム                                                            |
|                  | スコアシステム          | ❌ 未実装       | ポイント管理                                                            |
| **UI/UX**        | ノードエディタ          | ✅ 完了         | ビジュアルエディタ                                                      |
|                  | アクセシビリティ        | ✅ 完了         | キーボード/スクリーンリーダー対応                                       |
|                  | レスポンシブ            | ⚠️ 部分対応     | モバイル対応強化が必要                                                  |
| **システム**     | テーマ切り替え          | ✅ 完了         | ダーク/ライトテーマ                                                     |
|                  | 設定画面                | ❌ 未実装       | 音量/難易度設定                                                         |
|                  | 多言語対応              | ❌ 未実装       | 国際化                                                                  |

## 提案する新機能（優先順位順）

### 高優先度（Tier 1: すぐに実装可能）

1. **自動セーブ機能** (#35)
   - ✅ ノード遷移/状態更新時の進行データ自動保存は実装済み
   - 残: UI（オン/オフ・間隔・通知）/運用方針の整理

2. **アイテム使用システム** (#36)
   - ✅ インベントリUIからの使用/消費と基本効果は実装済み
   - 残: 効果タイプ拡張・ゲームデータ仕様の明確化

3. **画像表示機能** (#37)
   - ✅ ノードごとのシーン画像は実装済み
   - 残: アイテム画像/プリロード/遅延ロードなど

### 中優先度（Tier 2: 拡張が必要）

4. **変数システム** (#38)
   - 汎用変数管理
   - 条件分岐での使用

5. **キャラクターステータス** (#39)
   - HP/経験値管理
   - 戦闘/成長システム

6. **複数エンディング管理** (#40)
   - エンド判定ロジック
   - エンド集計

### 低優先度（Tier 3: 大規模拡張）

7. **サウンドシステム** (#41)
   - BGM/SE再生
   - 音量設定

8. **アチーブメントシステム** (#42)
   - 実績解除
   - 進行状況表示

9. **クラウド同期** (#43)
   - サーバー連携
   - 複数デバイス同期

## 実装推奨順序

1. **自動セーブ** → データ保護強化
2. **アイテム使用** → インベントリ活用
3. **画像表示** → ビジュアル改善
4. **変数システム** → 複雑なストーリー対応
5. **キャラクター** → RPG要素追加

## 技術的考慮点

- **パフォーマンス**: メディア追加時の読み込み最適化
- **互換性**: 古いブラウザ対応
- **拡張性**: プラグインアーキテクチャ検討
- **保守性**: コード分割とモジュール化

## 次のアクション

各機能の詳細イシュー作成と、自動セーブ機能からの実装開始を推奨。
