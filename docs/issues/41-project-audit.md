# 41: プロジェクト総点検・品質向上

- 番号: 41
- 種別: Task
- Tier: 1（低リスク, コード品質改善）
- 目的: 既存の不具合修正、コード品質向上、アーキテクチャ改善を実施。

## 問題点特定

### 1. コード品質問題
- **console.log/warnの残存**: デバッグコードが本番環境に残っている
- **グローバル変数依存**: window.APP_CONFIGへの過度な依存
- **設定の不整合**: debug.enabledがデフォルトtrue

### 2. アーキテクチャ問題
- **sceneImageEl未渡し**: play.jsでGameEngine.createEngineにsceneImageElが渡されていない
- **重複コード**: debug.jsの内容がplay.jsにコピーされている
- **メモリリーク**: イベントリスナーの適切なクリーンアップがない

### 3. エラーハンドリング
- **不十分なバリデーション**: ユーザー入力の適切な検証がない
- **例外処理**: 一部の関数でtry-catchが不足

### 4. ブラウザ互換性
- **古いAPI使用**: 可能性のある互換性問題

## 修正内容

### 1. デバッグコード除去
- console.log/warnを条件付きログに変更
- 設定ベースのログレベル制御

### 2. 設定改善
- debug.enabledをデフォルトfalseに変更
- 環境別設定の分離

### 3. アーキテクチャ修正
- play.jsのsceneImageEl渡し修正
- debug.js重複コード除去
- イベントリスナー管理改善

### 4. エラーハンドリング強化
- 入力バリデーション追加
- try-catchブロック追加
- ユーザーフレンドリーなエラーメッセージ

## テスト計画

- 全機能の動作確認
- ブラウザコンソールのクリーンさ確認
- メモリリークテスト
