# 44: エディターのストーリー作成支援機能検討

- 番号: 44
- 種別: feature
- 優先度: medium
- 目的: 管理画面エディターでのストーリー作成を支援する機能を提案・設計

## 概要
現在のnodeEditor.jsベースのエディターを拡張し、ストーリー作成の効率を向上させる支援機能を検討。テンプレート、自動生成、AI支援を軸に、初心者でも複雑なストーリーが作成可能にする。

## 現状分析
- nodeEditor.js: ノードベースのゲームデータ編集が可能
- mermaidPreview.js: フローチャート表示
- 課題: ストーリー構造の設計・記述が手作業中心

## 提案機能

### 1. ストーリーテンプレートシステム
- **テンプレートライブラリ**: ジャンル別テンプレート（アドベンチャー/推理/恋愛など）
- **カスタムテンプレート**: 作成したストーリーをテンプレート化
- **テンプレート適用**: 一クリックで基本構造を展開

### 2. 自動ノード生成機能
- **プロンプトベース生成**: テキスト入力でノードチェーンを自動生成
- **条件分岐テンプレート**: 選択肢パターンの自動挿入
- **変数・フラグの自動設定**: ストーリーロジックに基づく変数生成

### 3. AI支援機能（将来拡張）
- **ストーリー提案**: 現在のノードから続きをAI生成
- **整合性チェック**: ストーリーの矛盾点検出
- **最適化提案**: プレイ体験改善の提案

### 4. ストーリービルダーUI
- **ドラッグ＆ドロップノード作成**: ビジュアルストーリー構築
- **リアルタイムプレビュー**: 作成中にプレイテスト可能
- **バージョン管理**: ストーリー変更の履歴管理

### 5. コンテンツ支援ツール
- **キャラクター管理**: キャラクターDBと一貫性チェック
- **アイテム・イベント管理**: ストーリー内要素の一元管理
- **ロア・設定の一括編集**: 世界観設定の集中管理

## 実装ステップ

### Phase 1: テンプレートシステム
1. `scripts/storyTemplates.js` 作成
2. `admin.html` にテンプレート選択UI追加
3. nodeEditor.js にテンプレート適用機能

### Phase 2: 自動生成機能
1. プロンプトパーサー実装
2. ノード生成アルゴリズム
3. UI統合

### Phase 3: AI統合（オプション）
1. 外部API連携準備
2. ローカルAIモデル検討
3. フィードバックループ実装

## 技術的考慮事項
- **パフォーマンス**: 大規模ストーリーの高速処理
- **互換性**: 既存ゲームデータとの互換維持
- **拡張性**: プラグインアーキテクチャ検討

## 関連イシュー
- #42: AI支援機能（盲点提案）
- 既存nodeEditor機能拡張

## 受け入れ条件
- [ ] テンプレートからストーリー作成可能
- [ ] プロンプト入力でノード自動生成
- [ ] 作成効率が50%以上向上
- [ ] 初心者でも複雑ストーリー作成可能

## リスク / 留意点
- AI機能は外部依存。ローカル実装検討。
- テンプレートの質が重要。コミュニティ貢献検討。
