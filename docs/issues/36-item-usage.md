# 36: アイテム使用システム実装

- 番号: 36
- 種別: Feature
- Tier: 1（低リスク, 既存機能拡張）
- 目的: インベントリ内のアイテムを使用可能にし、ゲームのインタラクティブ性を高める。

## 背景 / 文脈

現在のインベントリは表示のみ。アイテムを使用することでストーリーが分岐したり、効果が発動したりするシステムが必要。ノードエディタでアイテム使用アクションを設定できるようにする。

## 要件（仕様）

- ノードアクションに `use_item` タイプを追加
- 使用時にアイテムを消費（数量減らす）
- 使用効果を定義可能（テキスト表示、フラグ設定など）
- 条件分岐でアイテム使用後の分岐をサポート

## 受け入れ基準（Acceptance Criteria）

- `use_item` アクションでアイテムを消費できる
- 使用効果をカスタマイズできる
- ノードエディタで設定可能
- 存在しないアイテム使用時はエラーにならない

## 影響範囲

- `scripts/gameEngine.js`: `use_item` アクション実装
- `scripts/nodeEditor.js`: アクションエディタ拡張
- `tests/gameEngine.inventory.spec.js`: 使用テスト追加

## 実装詳細

```javascript
// アクション定義例
{
  type: 'use_item',
  itemId: 'potion',
  consume: true,  // 使用時に消費するか
  effect: {
    type: 'show_text',
    text: 'ポーションを使用しました。HPが回復しました！'
  }
}
```

## テスト計画

- アイテム使用時の消費確認
- 使用効果の発動確認
- 存在しないアイテム使用時の動作確認
