# 30: プレイヤーインベントリシステム

- 番号: 30
- 種別: Feature
- Tier: 2（中リスク・データ/UI拡張）
- 目的: プレイヤーのアイテム管理機能を追加し、ゲームの没入感を向上させる。

## 背景 / 文脈

アドベンチャーゲームにおいて、アイテム収集・使用は重要なメカニクス。既存のノードベースシステムに統合して、アイテムをゲーム進行に活用できるようにする。

## 要件（仕様）

- **データモデル**:
  - `gameData.items`: アイテム定義（id, name, description, type, icon, etc.）。
  - `progress.inventory`: プレイヤー所持アイテム（itemId, quantity, acquiredAt）。

- **UI**: プレイ画面にインベントリパネル（トグル表示）。アイテム一覧、説明、使用ボタン。

- **ノード拡張**:
  - `gainItem`: アイテム取得ノード。
  - `loseItem`: アイテム消費ノード。
  - `checkItem`: アイテム所持条件分岐。

- **保存/復元**: インベントリ状態を progress に含める。

- **互換性**: 既存ゲームデータに items を追加可能。

## 受け入れ基準

- 新規ゲームでアイテム定義を読み込み、取得/使用可能。
- インベントリUI でアイテム一覧・使用が可能。
- ノードでアイテム操作が機能。
- 保存/復元でインベントリ状態が維持。

## 影響範囲

- `play.html`（インベントリUI追加）
- `styles/play.css`（インベントリスタイル）
- `scripts/play.js`（インベントリロジック）
- `scripts/gameEngine.js`（アイテム操作拡張）
- `scripts/nodeEditor.js`（アイテムノード追加）
- `CHANGELOG.md` / `README.md`（更新）

## タスク

1. データモデル定義（items, inventory）。
2. インベントリUI実装（play.html/css/js）。
3. ゲームエンジン拡張（アイテム操作）。
4. NodeEditor拡張（アイテムノード）。
5. テストとドキュメント更新。

## 手動テスト

- ゲームデータにアイテム定義を追加。
- ノードでアイテム取得/使用を設定。
- プレイでインベントリを開き、アイテム使用を確認。
- 保存/復元でインベントリ維持を確認。
